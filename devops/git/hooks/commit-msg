#!/bin/bash

t="$(mktemp)"
cp -f "$1" "$t"
typ="$(head -n 1 "$t" | grep -Eo '^[A-Za-z_\-]+(\([^)]+\))*!?:' | grep -o '^[A-Za-z_\-]*')"
c=''
case "$typ" in
build)    c='ğŸš§' ;;
ci)       c='âœ…' ;;
docs)     c='ğŸ“š' ;;
feat)     c='ğŸŒ¼' ;;
fix)      c='ğŸ' ;;
perf)     c='ğŸš€' ;;
refactor) c='ğŸŒ€' ;;
style)    c='ğŸ“' ;;
test)     c='ğŸ”' ;;
esac
echo '' >| "$1"
if [[ -n "$c" ]]; then
    echo -n "$c " >> "$1"
fi
cat "$t" >> "$1"
rm -f "$t"
